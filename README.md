# 1. TDD HomeWork 

## 요구사항 정리
### 기능 구현 
*  `GET` `/point/{id}` 포인트 조회 API
*  `PATCH` `/point/{id}/use`  포인트 사용 API 
*  `PATCH` `/point/{id}/charge` 포인트 충전 API
*  `GET` `/point/{id}/histories` 포인트 사용 내역 조회 API

### TDD 과제 
[ DEFAULT ]<br>
- `/point` 패키지 (디렉토리) 내에 `PointService` 기본 기능 작성
- `/database` 패키지의 구현체는 수정하지 않고, 이를 활용해 기능을 구현
- 각 기능에 대한 단위 테스트 작성

[ STEP 1 ]<br>
- 포인트 충전, 사용에 대한 정책 추가 (잔고 부족, 최대 잔고 등)
  - 추가 정책 사항
    - point 0원 일 때 사용시 잔고 부족 에러 
    - 최대 충전 금액 => 100,000 원
    - 최대 잔고 1,000,000 Point => 추가 충전 불가 에러 
    - point 미 생성시 에러 => 충전 / 사용시 에러
    - ID 음수 / 0 일 떄 에러
    - amount 음수 / 0 일때 에러
    
- 동시에 여러 요청이 들어오더라도 순서대로 (혹은 한번에 하나의 요청씩만) 제어될 수 있도록 리팩토링
- 동시성 제어에 대한 통합 테스트 작성

[ STEP 2 ]<br>
- 동시성 제어 방식에 대한 분석 및 보고서 작성 ( README.md )


## 동시성 제어 방식에 대한 분석 및 보고서 작성
### 제한
* Code 내에서 적용 해야함 ( DB 등 다른 Third Party 동시성 제어 x )
* 


### 왜..? JAVA Spring 에서는 동시성 제어라는 것이 필요할까?

Spring 은 기본적으로 멀티 쓰레드 기반으로 돌아간다 

즉 서버를 실행 하였을때 각 API 들이 멀티 쓰레드로 진행이 되고 

각 동시에 작업을 마무리를 할 수가 있다 

하지만 지금 과제처럼 포인트 요청사항이 동시 다발적으로 진행되면 어떻게 될까?

당연하게도 에러가 발생할 상황이 높다

정말 사소하게 충전 요청과 사용 요청의 순서 중 사용의 요청이 바뀌기만 한 경우도 있으니 말이다 

이러한 상황을 막기 위해 Spring 자체에서 동시성을 제어할 수 있도록 방법을 마련한 것 같다.


